<html>

<head>
    <title>BoJSON测试页面</title>
    <script src="bojson.js" type="text/javascript"></script>
    <script type="text/javascript" charset="utf-8">
        BoJSON.registeHelper('city', function() {
            var cities = ['北京', '天津', '杭州', '上海']
            return cities[this.numeric(0, cities.length - 1)]
        });

        function parseIt(){
            var tmpl = document.getElementById('tmpl').value    
            var rstEl = document.getElementById('rst')

            rstEl.value = JSON.stringify(BoJSON(eval('(' + tmpl + ')' )), null, 4)
        }
    </script>
</head>

<body>

    <textarea id="tmpl" rows="8" cols="80">
        {
            a: '{{numeric(3, 10)}}',
            b: ['{{repeat(1,3)}}',
                function(idx) {
                    return 'i am ' + idx
                }
            ],
            c:'{{city}}',
            d:'{{bool}}'
        }
    </textarea>
    <input type="button" onclick="parseIt()" name="" id="parse" value="大力的转!" />
    <textarea id="rst" rows="8" cols="80"></textarea>

</body>

</html>

